#!/usr/bin/env bash

BIN_DIR=$(dirname $0)
ROOT_DIR=$(dirname $BIN_DIR)
VENDOR_DIR=$ROOT_DIR/vendor

echo "args are $0 ... $1"

echo "checking the environment we are running under"
echo $(uname -a)
echo ""

echo "extracting swift toolchain"
pushd $VENDOR_DIR
tar -xzf swift-2.2.tar.gz
export PATH=$(pwd)/swift-2.2-SNAPSHOT-2015-12-01-b-ubuntu14.04/usr/bin:$PATH
popd

echo "COMPILE ALL THE THINGS!"
pushd $1
swiftc */*.swift -v
popd

